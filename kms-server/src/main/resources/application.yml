env:
  domain: http://127.0.0.1
  external-ip: 192.168.1.100
  internal-ip: 127.0.0.1
basic:
  name: kms-server
  version: 3.0.0
  copyrightYear: 2025
  profile: /uploadPath
  external-ip: ${env.external-ip}
  internal-ip: ${env.internal-ip}
  domain: ${env.domain}
  port: ${server.port}

server:
  port: 8090
  servlet:
    context-path: /kms
    encoding:
      charset: utf-8
      force: true
  tomcat:
    uri-encoding: UTF-8
  compression:
    enabled: true

spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}  # 默认激活dev配置
  autoconfigure:
    exclude:
      - org.springframework.ai.model.deepseek.autoconfigure.DeepSeekChatAutoConfiguration
      - org.springframework.ai.model.zhipuai.autoconfigure.ZhiPuAiChatAutoConfiguration
      - org.springframework.ai.model.zhipuai.autoconfigure.ZhiPuAiEmbeddingAutoConfiguration
      - org.springframework.ai.model.zhipuai.autoconfigure.ZhiPuAiImageAutoConfiguration
      - com.alibaba.cloud.ai.autoconfigure.dashscope.DashScopeChatAutoConfiguration
      - com.alibaba.cloud.ai.autoconfigure.dashscope.DashScopeEmbeddingAutoConfiguration
      - com.alibaba.cloud.ai.autoconfigure.dashscope.DashScopeImageAutoConfiguration
      - com.alibaba.cloud.ai.autoconfigure.dashscope.DashScopeRerankAutoConfiguration
      - com.alibaba.cloud.ai.autoconfigure.dashscope.DashScopeAgentAutoConfiguration
      - com.alibaba.cloud.ai.autoconfigure.dashscope.DashScopeAudioSpeechAutoConfiguration
      - com.alibaba.cloud.ai.autoconfigure.dashscope.DashScopeAudioTranscriptionAutoConfiguration
      - com.alibaba.cloud.ai.autoconfigure.dashscope.DashScopeVideoAutoConfiguration
  datasource:
    url: jdbc:postgresql://${env.database-url}:5432/${env.database}?currentSchema=public&timezone=Asia/Shanghai
    username: ${env.database-username}
    password: ${env.database-password}
    driver-class-name: org.postgresql.Driver
    type: com.zaxxer.hikari.HikariDataSource
    hikari:
        minimum-idle: 2
        maximum-pool-size: 4
        data-source-properties:
          timezone: Asia/Shanghai
          stringtype: unspecified
          useUnicode: true
          characterEncoding: utf8
          useSSL: true
          autoReconnect: true
          reWriteBatchedInserts: true
  data:
    redis:
      host: ${env.redis-host}
      port: 6379
      database: 15
      password: ${env.redis-password}
      ssl.enabled: false
      timeout: 10s
      connect-timeout: 5000ms
      lettuce:
        pool:
          min-idle: 2
          max-idle: 8
          max-active: 8
          max-wait: -1ms
        cluster:
          refresh:
            adaptive: true
            period: 60000
  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB
  mvc:
    format:
      date-time: yyyy-MM-dd HH:mm:ss
      date: yyyy-MM-dd
      time: HH:mm:ss
  jackson:
    time-zone: Asia/Shanghai
    date-format: yyyy-MM-dd HH:mm:ss

logging:
  level:
    com.wudao: ${env.log-level}
    org.apache.rocketmq: ${env.log-level}
    ### org.springframework: ${LOG_LEVEL_SPRING:debug}
    org.springframework: ${env.log-level}
    org.springframework.boot.autoconfigure: ${env.log-level}
    com.wudao.system.mapper: ${env.log-level}
    org.mybatis.spring.mapper.ClassPathMapperScanner: ${env.log-level}
    com.baomidou.mybatisplus.core.metadata.TableInfoHelper: ${env.log-level}
    com.github.yulichang.injector.MPJSqlInjector: ${env.log-level}
    org.springaicommunity: ${env.log-level}
    org.springframework.ai.chat.model.MessageAggregator: WARN

mybatis-plus:
  mapper-locations: classpath*:mapper/**/*.xml
  global-config:
    db-config:
      id-type: auto
      logic-delete-value: true
      logic-not-delete-value: false
  configuration:
    log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl
  type-handlers-package: com.baomidou.mybatisplus.extension.handlers.JacksonTypeHandler

comment:
  target:
    knowledge: 0

token:
  expireTime: 720 #分钟
  header: Authorization
  secret: ${JWT_SECRET:your-jwt-secret-key-at-least-64-characters-long-for-security}


# AI配置
ai:
  qwen:
    api-key: ${QWEN_API_KEY:your-qwen-api-key}
    base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
    model: qwen-turbo

springdoc:
  group-configs:
    - group: 业务模块
      packages-to-scan:
        - com.wudao.security.controller
        - com.wudao.kms
    - group: 基础模块
      packages-to-scan:
        - com.wudao.framework.controller
        - com.wudao.scheduler.controller
    - group: 系统模块
      packages-to-scan: com.wudao.system.controller



# 向量化处理配置
vectorization:
  api:
    url: http://${env.vectorization-ip}:8080
miner-u-api: eyJ0eXBlIjoiSldUIiwiYWxnIjoiSFM1MTIifQ.eyJqdGkiOiI3ODkwMDE5MiIsInJvbCI6IlJPTEVfUkVHSVNURVIiLCJpc3MiOiJPcGVuWExhYiIsImlhdCI6MTc2MTY5ODM1NiwiY2xpZW50SWQiOiJsa3pkeDU3bnZ5MjJqa3BxOXgydyIsInBob25lIjoiMTMzOTEyNDg2MDUiLCJvcGVuSWQiOm51bGwsInV1aWQiOiI4NjA1MGFhMS0zZWZhLTRjZjEtYmVjMy01ZTk0OTIxNDJmNmUiLCJlbWFpbCI6IiIsImV4cCI6MTc2MjkwNzk1Nn0.pu5zaeElAW5qShN4RS3JybHT91DYQ1J-mjiVL4uphX5wYkeICM4LDWXvX3dQK1UrXPmykmqz8Ouce__aT-eT0Q
# ocr 配置 mineru paddle
ocr: mineru
pai:
  dlc:
    access-key: ${PAI_ACCESS_KEY:your-access-key}
    secret-key: ${PAI_SECRET_KEY:your-secret-key}
    region: cn-hangzhou
    endpoint: pai-dlc.cn-hangzhou.aliyuncs.com
    oss-prefix: oss://your-bucket.oss-cn-hangzhou-internal.aliyuncs.com/
# oauth
justauth:
  enabled: true
  cache:
    type: default
    prefix: 'local::'
    timeout: 1h
  extend:
    enum-class: com.wudao.security.model.WdAuthSource
    config:
      WUDAO:
        request-class: com.wudao.security.model.AuthWudaoRequest
        client-id: ${OAUTH_CLIENT_ID:kms}
        client-secret: ${OAUTH_CLIENT_SECRET:your-client-secret}
        redirect-uri: ${env.domain}/kms/callback?source=wudao